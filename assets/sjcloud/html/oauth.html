<html>
<head>
    <link rel="stylesheet" href="../../../node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../../node_modules/todc-bootstrap/dist/css/todc-bootstrap.min.css">
</head>
<body>
    <div class="container">
		<a id="oauth-btn" class="btn btn-primary btn-lrg">Login with DNAnexus</a><br>
    </div>
</body>

<script> window.jQuery = window.$ = require('jquery'); </script>
<script src="../../../node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
<script>
    const { shell, remote } = require('electron');

    $( () => {
        $('#oauth-btn').click( function (event) {
            event.preventDefault();

			var authurl = "https://auth.dnanexus.com/oauth2/authorize?";
			authurl += "response_type=code&";
			authurl += "client_id=pecan-dev&";
			authurl += "redirect_uri=https://pecan.dev";
			//console.log(authurl);
			remote.getCurrentWindow().loadURL(authurl, {
				httpReferrer: "https://pecan.dev",
				userAgent: "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/60.0.3112.90 Safari/537.36"
			});
        });
	});
</script>
</html>
